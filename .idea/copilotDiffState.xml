<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/index.html" />
              <option name="originalContent" value="&lt;!doctype html&gt;&#10;&lt;html lang=&quot;fr&quot;&gt;&#10;  &lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot; /&gt;&#10;    &lt;title&gt;Youtube MSC!&lt;/title&gt;&#10;      &lt;meta http-equiv=&quot;Content-Security-Policy&quot;&#10;            content=&quot;default-src 'self';&#10;                 script-src 'self' 'unsafe-inline';&#10;                 style-src 'self' 'unsafe-inline';&#10;                 webview-src https://music.youtube.com;&quot;&gt;&#10;  &lt;/head&gt;&#10;  &lt;body&gt;&#10;  &lt;webview&#10;          id=&quot;ytm&quot;&#10;          src=&quot;https://music.youtube.com&quot;&#10;          style=&quot;width:100vw; height:100vh;&quot;&#10;          partition=&quot;persist:youtube&quot;&#10;          nodeintegration=&quot;false&quot;&#10;          nodeintegrationinsubframes=&quot;false&quot;&#10;          disablewebsecurity=&quot;false&quot;&#10;          enableremotemodule=&quot;false&quot;&#10;          webpreferences=&quot;contextIsolation=true&quot;&#10;  &gt;&lt;/webview&gt;&#10;    &lt;script type=&quot;module&quot; src=&quot;/src/renderer.ts&quot;&gt;&lt;/script&gt;&#10;&#10;  &lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!doctype html&gt;&#10;&lt;html lang=&quot;fr&quot;&gt;&#10;  &lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot; /&gt;&#10;    &lt;title&gt;Youtube MSC!&lt;/title&gt;&#10;      &lt;meta http-equiv=&quot;Content-Security-Policy&quot;&#10;            content=&quot;default-src 'self';&#10;                 script-src 'self' 'unsafe-inline';&#10;                 style-src 'self' 'unsafe-inline';&#10;                 webview-src https://music.youtube.com;&quot;&gt;&#10;  &lt;/head&gt;&#10;  &lt;body&gt;&#10;  &lt;webview&#10;          id=&quot;ytm&quot;&#10;          src=&quot;https://music.youtube.com&quot;&#10;          style=&quot;width:100vw; height:100vh;&quot;&#10;          partition=&quot;persist:youtube&quot;&#10;          nodeintegration=&quot;false&quot;&#10;          nodeintegrationinsubframes=&quot;false&quot;&#10;          disablewebsecurity=&quot;false&quot;&#10;          enableremotemodule=&quot;false&quot;&#10;          webpreferences=&quot;contextIsolation=true&quot;&#10;  &gt;&lt;/webview&gt;&#10;    &lt;script type=&quot;module&quot; src=&quot;/src/renderer.ts&quot;&gt;&lt;/script&gt;&#10;&#10;  &lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main.ts" />
              <option name="originalContent" value="import {app, BrowserWindow, globalShortcut, Tray, ipcMain, nativeImage } from 'electron';&#10;import path from 'node:path';&#10;import started from 'electron-squirrel-startup';&#10;&#10;if (started) {&#10;  app.quit();&#10;}&#10;let mainWindow: BrowserWindow | null = null&#10;let trayWindow: BrowserWindow | null = null;&#10;&#10;const createWindow = () =&gt; {&#10;  const iconPath = getAppIconPath();&#10;  mainWindow = new BrowserWindow({&#10;    width: 1100,&#10;    height: 600,&#10;    icon: iconPath,&#10;    webPreferences: {&#10;      preload: path.join(__dirname, 'preload.js'),&#10;      webviewTag: true,&#10;      contextIsolation: true,&#10;      nodeIntegration: false,&#10;      sandbox: true,&#10;      webSecurity: true,&#10;      allowRunningInsecureContent: false,&#10;      experimentalFeatures: false,&#10;    },&#10;  });&#10;&#10;  if (MAIN_WINDOW_VITE_DEV_SERVER_URL) {&#10;    mainWindow.loadURL(MAIN_WINDOW_VITE_DEV_SERVER_URL);&#10;  } else {&#10;    mainWindow.loadFile(path.join(__dirname, '../renderer/main_window/index.html'));&#10;  }&#10;&#10;  // Bloquer la navigation non autorisée&#10;  mainWindow.webContents.on('will-navigate', (event, navigationUrl) =&gt; {&#10;    const parsedUrl = new URL(navigationUrl);&#10;    // Autoriser uniquement les URLs de développement et file://&#10;    if (parsedUrl.origin !== 'file://' &amp;&amp; !navigationUrl.startsWith(MAIN_WINDOW_VITE_DEV_SERVER_URL || '')) {&#10;      event.preventDefault();&#10;      console.warn('Navigation bloquée vers:', navigationUrl);&#10;    }&#10;  });&#10;&#10;  // Empêcher l'ouverture de nouvelles fenêtres&#10;  mainWindow.webContents.setWindowOpenHandler(() =&gt; {&#10;    return { action: 'deny' };&#10;  });&#10;&#10;  // ✅ icône du Dock (macOS uniquement)&#10;  if (process.platform === 'darwin') {&#10;    app.dock.setIcon(iconPath);&#10;  }&#10;&#10;  if (!app.isPackaged) {&#10;    mainWindow.webContents.openDevTools();&#10;  }&#10;  mainWindow.on('closed', () =&gt; (mainWindow = null))&#10;};&#10;&#10;app.whenReady().then(() =&gt; {&#10;  createWindow()&#10;  createTray()&#10;  registerMediaShortcuts()&#10;})&#10;&#10;&#10;function createTray() {&#10;  const iconPath = app.isPackaged&#10;    ? path.join(process.resourcesPath, 'youtube_music.png')&#10;    : path.join(process.cwd(), 'public', 'youtube_music.png');&#10;  const trayIcon = nativeImage.createFromPath(iconPath);&#10;&#10;  const tray = new Tray(trayIcon.resize({ width: 16, height: 16 }));&#10;  tray.setToolTip('YouTube Music');&#10;  tray.on('click', () =&gt; {&#10;    if (trayWindow?.isVisible()) {&#10;      trayWindow.hide();&#10;    } else {&#10;      createOrShowTrayWindow(tray);&#10;    }&#10;  });&#10;}&#10;function getAppIconPath() {&#10;  if (app.isPackaged) {&#10;    return path.join(process.resourcesPath, 'youtube_music.icns');&#10;  } else {&#10;    return path.join(process.cwd(), 'public', 'youtube_music.png');&#10;  }&#10;}&#10;function createOrShowTrayWindow(tray: Tray) {&#10;  if (!trayWindow) {&#10;    trayWindow = new BrowserWindow({&#10;      width: 200,&#10;      height: 150,&#10;      show: false,&#10;      frame: false,&#10;      resizable: false,&#10;      alwaysOnTop: true,&#10;      transparent: true,&#10;      webPreferences: {&#10;        preload: path.join(__dirname, 'tray-menu.js'),&#10;        nodeIntegration: false,&#10;        contextIsolation: true,&#10;        sandbox: true,&#10;        webSecurity: true,&#10;      },&#10;    });&#10;&#10;    const trayHtmlPath = app.isPackaged&#10;      ? path.join(process.resourcesPath, 'tray-menu.html')&#10;      : path.join(process.cwd(), 'public', 'tray-menu.html');&#10;    trayWindow.loadFile(trayHtmlPath);&#10;&#10;    // Empêcher l'ouverture de nouvelles fenêtres&#10;    trayWindow.webContents.setWindowOpenHandler(() =&gt; {&#10;      return { action: 'deny' };&#10;    });&#10;  }&#10;&#10;  const trayBounds = tray.getBounds();&#10;  const x = Math.round(trayBounds.x + trayBounds.width / 2 - 100);&#10;  const y = Math.round(trayBounds.y + trayBounds.height);&#10;&#10;  trayWindow.setPosition(x, y, false);&#10;  trayWindow.show();&#10;  trayWindow.focus();&#10;&#10;  trayWindow.on('blur', () =&gt; {&#10;    trayWindow.hide();&#10;  })&#10;}&#10;&#10;// --- Contrôles reçus depuis le menu tray ---&#10;ipcMain.on('tray:play', () =&gt; {&#10;  mainWindow?.webContents.send('toggle-playback')&#10;});&#10;ipcMain.on('tray:next', () =&gt; {&#10;  mainWindow?.webContents.send('next-track')&#10;});&#10;ipcMain.on('tray:prev', () =&gt; {&#10;  mainWindow?.webContents.send('prev-track')&#10;});&#10;&#10;ipcMain.on('tray:quit', () =&gt; {&#10;  BrowserWindow.getAllWindows().forEach(win =&gt; {&#10;    win.removeAllListeners('close');&#10;    win.destroy();&#10;  });&#10;&#10;  app.quit();&#10;});&#10;&#10;function registerMediaShortcuts() {&#10;  globalShortcut.register('MediaPlayPause', () =&gt; {&#10;    console.log('ici')&#10;    mainWindow?.webContents.send('toggle-playback')&#10;  })&#10;  globalShortcut.register('MediaNextTrack', () =&gt; {&#10;    mainWindow?.webContents.send('next-track')&#10;  })&#10;  globalShortcut.register('MediaPreviousTrack', () =&gt; {&#10;    mainWindow?.webContents.send('prev-track')&#10;  })&#10;}&#10;&#10;// This method will be called when Electron has finished&#10;// initialization and is ready to create browser windows.&#10;// Some APIs can only be used after this event occurs.&#10;&#10;// Quit when all windows are closed, except on macOS. There, it's common&#10;// for applications and their menu bar to stay active until the user quits&#10;// explicitly with Cmd + Q.&#10;app.on('window-all-closed', () =&gt; {&#10;  if (process.platform !== 'darwin') {&#10;    app.quit();&#10;  }&#10;});&#10;&#10;app.on('activate', () =&gt; {&#10;  // On OS X it's common to re-create a window in the app when the&#10;  // dock icon is clicked and there are no other windows open.&#10;  if (BrowserWindow.getAllWindows().length === 0) {&#10;    createWindow();&#10;  }&#10;});&#10;&#10;// In this file you can include the rest of your app's specific main process&#10;// code. You can also put them in separate files and import them here.&#10;" />
              <option name="updatedContent" value="import {app, BrowserWindow, globalShortcut, Tray, ipcMain, nativeImage } from 'electron';&#10;import path from 'node:path';&#10;import started from 'electron-squirrel-startup';&#10;&#10;if (started) {&#10;  app.quit();&#10;}&#10;let mainWindow: BrowserWindow | null = null&#10;let trayWindow: BrowserWindow | null = null;&#10;&#10;const createWindow = () =&gt; {&#10;  const iconPath = getAppIconPath();&#10;  mainWindow = new BrowserWindow({&#10;    width: 1100,&#10;    height: 600,&#10;    icon: iconPath,&#10;    webPreferences: {&#10;      preload: path.join(__dirname, 'preload.js'),&#10;      webviewTag: true,&#10;      contextIsolation: true,&#10;      nodeIntegration: false,&#10;      sandbox: true,&#10;      webSecurity: true,&#10;      allowRunningInsecureContent: false,&#10;      experimentalFeatures: false,&#10;    },&#10;  });&#10;&#10;  if (MAIN_WINDOW_VITE_DEV_SERVER_URL) {&#10;    mainWindow.loadURL(MAIN_WINDOW_VITE_DEV_SERVER_URL);&#10;  } else {&#10;    mainWindow.loadFile(path.join(__dirname, '../renderer/main_window/index.html'));&#10;  }&#10;&#10;  // Bloquer la navigation non autorisée&#10;  mainWindow.webContents.on('will-navigate', (event, navigationUrl) =&gt; {&#10;    const parsedUrl = new URL(navigationUrl);&#10;    // Autoriser uniquement les URLs de développement et file://&#10;    if (parsedUrl.origin !== 'file://' &amp;&amp; !navigationUrl.startsWith(MAIN_WINDOW_VITE_DEV_SERVER_URL || '')) {&#10;      event.preventDefault();&#10;      console.warn('Navigation bloquée vers:', navigationUrl);&#10;    }&#10;  });&#10;&#10;  // Empêcher l'ouverture de nouvelles fenêtres&#10;  mainWindow.webContents.setWindowOpenHandler(() =&gt; {&#10;    return { action: 'deny' };&#10;  });&#10;&#10;  // ✅ icône du Dock (macOS uniquement)&#10;  if (process.platform === 'darwin') {&#10;    app.dock.setIcon(iconPath);&#10;  }&#10;&#10;  if (!app.isPackaged) {&#10;    mainWindow.webContents.openDevTools();&#10;  }&#10;  mainWindow.on('closed', () =&gt; (mainWindow = null))&#10;};&#10;&#10;app.whenReady().then(() =&gt; {&#10;  createWindow()&#10;  createTray()&#10;  registerMediaShortcuts()&#10;})&#10;&#10;&#10;function createTray() {&#10;  const iconPath = app.isPackaged&#10;    ? path.join(process.resourcesPath, 'youtube_music.png')&#10;    : path.join(process.cwd(), 'public', 'youtube_music.png');&#10;  const trayIcon = nativeImage.createFromPath(iconPath);&#10;&#10;  const tray = new Tray(trayIcon.resize({ width: 16, height: 16 }));&#10;  tray.setToolTip('YouTube Music');&#10;  tray.on('click', () =&gt; {&#10;    if (trayWindow?.isVisible()) {&#10;      trayWindow.hide();&#10;    } else {&#10;      createOrShowTrayWindow(tray);&#10;    }&#10;  });&#10;}&#10;function getAppIconPath() {&#10;  if (app.isPackaged) {&#10;    return path.join(process.resourcesPath, 'youtube_music.icns');&#10;  } else {&#10;    return path.join(process.cwd(), 'public', 'youtube_music.png');&#10;  }&#10;}&#10;function createOrShowTrayWindow(tray: Tray) {&#10;  if (!trayWindow) {&#10;    trayWindow = new BrowserWindow({&#10;      width: 200,&#10;      height: 150,&#10;      show: false,&#10;      frame: false,&#10;      resizable: false,&#10;      alwaysOnTop: true,&#10;      transparent: true,&#10;      webPreferences: {&#10;        preload: path.join(__dirname, 'tray-menu.js'),&#10;        nodeIntegration: false,&#10;        contextIsolation: true,&#10;        sandbox: true,&#10;        webSecurity: true,&#10;      },&#10;    });&#10;&#10;    const trayHtmlPath = app.isPackaged&#10;      ? path.join(process.resourcesPath, 'tray-menu.html')&#10;      : path.join(process.cwd(), 'public', 'tray-menu.html');&#10;    trayWindow.loadFile(trayHtmlPath);&#10;&#10;    // Empêcher l'ouverture de nouvelles fenêtres&#10;    trayWindow.webContents.setWindowOpenHandler(() =&gt; {&#10;      return { action: 'deny' };&#10;    });&#10;  }&#10;&#10;  const trayBounds = tray.getBounds();&#10;  const x = Math.round(trayBounds.x + trayBounds.width / 2 - 100);&#10;  const y = Math.round(trayBounds.y + trayBounds.height);&#10;&#10;  trayWindow.setPosition(x, y, false);&#10;  trayWindow.show();&#10;  trayWindow.focus();&#10;&#10;  trayWindow.on('blur', () =&gt; {&#10;    trayWindow.hide();&#10;  })&#10;}&#10;&#10;// --- Contrôles reçus depuis le menu tray ---&#10;ipcMain.on('tray:play', () =&gt; {&#10;  mainWindow?.webContents.send('toggle-playback')&#10;});&#10;ipcMain.on('tray:next', () =&gt; {&#10;  mainWindow?.webContents.send('next-track')&#10;});&#10;ipcMain.on('tray:prev', () =&gt; {&#10;  mainWindow?.webContents.send('prev-track')&#10;});&#10;&#10;ipcMain.on('tray:quit', () =&gt; {&#10;  BrowserWindow.getAllWindows().forEach(win =&gt; {&#10;    win.removeAllListeners('close');&#10;    win.destroy();&#10;  });&#10;&#10;  app.quit();&#10;});&#10;&#10;function registerMediaShortcuts() {&#10;  globalShortcut.register('MediaPlayPause', () =&gt; {&#10;    console.log('ici')&#10;    mainWindow?.webContents.send('toggle-playback')&#10;  })&#10;  globalShortcut.register('MediaNextTrack', () =&gt; {&#10;    mainWindow?.webContents.send('next-track')&#10;  })&#10;  globalShortcut.register('MediaPreviousTrack', () =&gt; {&#10;    mainWindow?.webContents.send('prev-track')&#10;  })&#10;}&#10;&#10;// This method will be called when Electron has finished&#10;// initialization and is ready to create browser windows.&#10;// Some APIs can only be used after this event occurs.&#10;&#10;// Quit when all windows are closed, except on macOS. There, it's common&#10;// for applications and their menu bar to stay active until the user quits&#10;// explicitly with Cmd + Q.&#10;app.on('window-all-closed', () =&gt; {&#10;  if (process.platform !== 'darwin') {&#10;    app.quit();&#10;  }&#10;});&#10;&#10;app.on('activate', () =&gt; {&#10;  // On OS X it's common to re-create a window in the app when the&#10;  // dock icon is clicked and there are no other windows open.&#10;  if (BrowserWindow.getAllWindows().length === 0) {&#10;    createWindow();&#10;  }&#10;});&#10;&#10;// In this file you can include the rest of your app's specific main process&#10;// code. You can also put them in separate files and import them here.&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>